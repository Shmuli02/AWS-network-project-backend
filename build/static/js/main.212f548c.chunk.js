(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{135:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),c=n(10),s=n(9),i=n(0),o=n(143),u=n(20),l=n.n(u),j="/api/notes",d=null,b={getAll:function(){return l.a.get(j).then((function(e){return e.data}))},create:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,l.a.post(j,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){d="bearer ".concat(e)},update:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:d}},e.next=3,l.a.put("".concat(j,"/").concat(t),n,r);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteNote:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,l.a.delete("".concat(j,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=n(21),h=n(32),O=n(34),x=n(38),f=n(70),m=n.n(f),v=n(1);var g=function(e){var t=Object(i.useRef)(),n=function(){var n=Object(c.a)(a.a.mark((function n(r){var c,s,i,o,u,l;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.preventDefault(),c=t.current.files[0],s=t.current.files[0].name.replace(/\..+$/,"");try{i=e.taskId.taskId}catch(a){i="Kuvat"}return o={bucketName:"aktiivinenkeppari",region:"eu-central-1",dirName:i,accessKeyId:"AKIA6EURHT7BF55JBM7H",secretAccessKey:"3pjJ+Vn3BOD9N10zcV9e5jPHkePdkPBHlykHhCgF"},u=new m.a(o),n.next=8,u.uploadFile(c,s);case 8:l=n.sent,console.log(l),204===l.status?console.log("success :)"):console.log("fail :(");case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{className:"upload-steps",onSubmit:n,children:[Object(v.jsxs)("label",{children:["Upload file:",Object(v.jsx)("input",{type:"file",ref:t})]}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{type:"submit",children:"Upload"})]})})};function k(e){e.taskId;var t=e.note,n=(e.onNoteChange,Object(i.useState)(!1)),r=Object(s.a)(n,2),o=r[0],u=r[1],l=t[0],j=Object(i.useState)(l.url),d=Object(s.a)(j,2),f=d[0],m=d[1],g=function(){return u(!1)},k=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.localStorage.getItem("loggedBlogappUser"),e.next=3,JSON.parse(n);case 3:return r=e.sent,b.setToken(r.token),e.next=7,b.update(l.id,{url:f});case 7:e.sent,g(),m("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.localStorage.getItem("loggedBlogappUser"),e.next=3,JSON.parse(t);case 3:n=e.sent,console.log(l),b.setToken(n.token),b.deleteNote(l.id),g();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(h.a,{variant:"primary",onClick:function(){return u(!0)},children:"Muokkaa suoritusta"}),Object(v.jsxs)(p.a,{show:o,onHide:g,children:[Object(v.jsx)(p.a.Header,{closeButton:!0,children:Object(v.jsx)(p.a.Title,{children:"Modal heading"})}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsxs)(x.a,{children:["Woohoo, you're reading this text in a modal!",Object(v.jsxs)(O.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(v.jsx)(O.a.Label,{children:"Linkki"}),Object(v.jsx)(O.a.Control,{as:"textarea",rows:2,onChange:function(e){return m(e.target.value)},value:f})]})]}),Object(v.jsx)(x.a,{children:Object(v.jsx)(h.a,{variant:"danger",onClick:w,children:"Poista suoritus"})})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(h.a,{variant:"secondary",onClick:g,children:"Peruuta"}),Object(v.jsx)(h.a,{variant:"primary",onClick:k,children:"Tallenna"})]})]})]})}function w(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],o=n[1],u=Object(i.useState)(""),l=Object(s.a)(u,2),j=l[0],d=l[1],f=function(){return o(!1)},m=function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=window.localStorage.getItem("loggedBlogappUser"),t.next=3,JSON.parse(r);case 3:return c=t.sent,console.log(n),console.log(e.taskId),console.log(c.username),console.log(j),b.setToken(c.token),t.next=11,b.create({task:e.taskId,user:c.username,url:j});case 11:t.sent,f();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(h.a,{variant:"primary",onClick:function(){return o(!0)},children:"Lis\xe4\xe4 suoritus"}),Object(v.jsxs)(p.a,{show:r,onHide:f,children:[Object(v.jsx)(p.a.Header,{closeButton:!0,children:Object(v.jsx)(p.a.Title,{children:"Modal heading"})}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)(x.a,{children:[Object(v.jsx)(O.a.Label,{children:"Lataa tiedosto tai lis\xe4\xe4 linkki"}),Object(v.jsx)(g,{taskId:e}),Object(v.jsx)(O.a.Group,{controlId:"exampleForm.ControlTextarea1",children:Object(v.jsx)(O.a.Control,{as:"textarea",rows:2,onChange:function(e){return d(e.target.value)},value:j,placeholder:"linkki"})})]})}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(h.a,{variant:"secondary",onClick:f,children:"Peruuta"}),Object(v.jsx)(h.a,{variant:"primary",onClick:m,children:"Tallenna"})]})]})]})}function y(){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function e(){var t,n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.localStorage.getItem("loggedBlogappUser"))){e.next=12;break}return e.next=4,JSON.parse(t);case 4:return n=e.sent,e.next=7,b.getAll();case 7:return r=e.sent,e.next=10,r.filter((function(e){return e.user.username===n.username}));case 10:return c=e.sent,e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=n(48),C=n(26),T=n(40),I=(n(135),3600),B=86400,L={isPlaying:!0,size:120,strokeWidth:6},A=function(e,t){return Object(v.jsxs)("div",{className:"time-wrapper",children:[Object(v.jsx)("div",{className:"time",children:t}),Object(v.jsx)("div",{children:e})]})};function F(){var e=1627765199-Date.now()/1e3,t=Math.ceil(e/B)*B;return Object(v.jsxs)("div",{className:"Timer",children:[Object(v.jsx)(T.CountdownCircleTimer,Object(C.a)(Object(C.a)({},L),{},{colors:[["#7E2E84"]],duration:t,initialRemainingTime:e,children:function(e){var n=e.elapsedTime;return A("p\xe4iv\xe4\xe4",(t-n)/B|0)}})),Object(v.jsx)(T.CountdownCircleTimer,Object(C.a)(Object(C.a)({},L),{},{colors:[["#D14081"]],duration:B,initialRemainingTime:e%B,onComplete:function(t){return[e-t>I]},children:function(e){var t=e.elapsedTime;return A("tuntia",(B-t)%B/I|0)}})),Object(v.jsx)(T.CountdownCircleTimer,Object(C.a)(Object(C.a)({},L),{},{colors:[["#EF798A"]],duration:I,initialRemainingTime:e%I,onComplete:function(t){return[e-t>60]},children:function(e){var t=e.elapsedTime;return A("minuuttia",(I-t)%I/60|0)}})),Object(v.jsx)(T.CountdownCircleTimer,Object(C.a)(Object(C.a)({},L),{},{colors:[["#218380"]],duration:60,initialRemainingTime:e%60,onComplete:function(t){return[e-t>0]},children:function(e){var t=e.elapsedTime;return A("sekunttia",60-t|0)}}))]})}var U=function(e){var t=e.message;return null===t?null:Object(v.jsx)("div",{className:"error",children:t})},H=function(e){var t=e.tasks,n=e.notes,r=e.user,a=n.map((function(e){return e.task})),c=Object(i.useState)(null),u=Object(s.a)(c,2),l=u[0];u[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Teht\xe4v\xe4t"}),Object(v.jsx)(U,{message:l}),Object(v.jsx)("br",{}),Object(v.jsx)("h2",{children:"Aikaa j\xe4ljell\xe4"}),Object(v.jsx)(F,{}),Object(v.jsx)("br",{}),Object(v.jsxs)(o.a,{striped:!0,bordered:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[r?Object(v.jsx)("th",{children:"Suoritukset"}):"",Object(v.jsx)("th",{children:"Teht\xe4v\xe4"}),Object(v.jsx)("th",{children:"Haastavuus"}),r?Object(v.jsx)("th",{children:"Muokkaus"}):""]})}),Object(v.jsx)("tbody",{children:t.map((function(e){return Object(v.jsxs)("tr",{children:[r?Object(v.jsx)("td",{children:a.includes(e._id)?Object(v.jsx)(N.a,{pill:!0,variant:"success",children:"Suoritettu"}):Object(v.jsx)(N.a,{pill:!0,variant:"light",children:"Ei suoritettu"})}):"",Object(v.jsx)("td",{children:e.title}),Object(v.jsx)("td",{children:e.difficulty}),r?Object(v.jsx)("td",{children:a.includes(e._id)?Object(v.jsx)(k,{taskId:e._id,note:n.filter((function(t){return t.task==e._id}))}):Object(v.jsx)(w,{taskId:e._id,user:r})}):""]},e._id)}))})]})]})},E=n(11),J={login:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(e){var t=Object(E.g)(),n=Object(i.useState)(""),r=Object(s.a)(n,2),o=r[0],u=r[1],l=Object(i.useState)(""),j=Object(s.a)(l,2),d=j[0],b=j[1],p=Object(i.useState)(null),h=Object(s.a)(p,2),O=(h[0],h[1]),x=Object(i.useState)(null),f=Object(s.a)(x,2),m=f[0],g=f[1],k=function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,J.login({username:o,password:d});case 4:c=n.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(c)),O(c),u(""),b(""),e.onLogin(o),t.push("/"),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),g("V\xe4\xe4r\xe4 k\xe4ytt\xe4j\xe4tunnus tai salasana"),setTimeout((function(){g(null)}),5e3);case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)(U,{message:m}),Object(v.jsxs)("form",{className:"px-4 py-3",onSubmit:k,children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Username"}),Object(v.jsx)("input",{type:"text",className:"form-control",value:o,onChange:function(e){var t=e.target;return u(t.value)},placeholder:"Username"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Password"}),Object(v.jsx)("input",{type:"password",className:"form-control",value:d,onChange:function(e){var t=e.target;return b(t.value)},placeholder:"Password"})]}),Object(v.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]}),Object(v.jsx)("div",{className:"dropdown-divider"}),Object(v.jsx)("a",{className:"dropdown-item",href:"/register",children:"New around here? Sign up"}),Object(v.jsx)("a",{className:"dropdown-item",href:"#",children:"Forgot password?"})]})},K=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Aktiivinen Keppari"}),Object(v.jsx)("p",{children:"Aktiivinen Keppari kilpailun etusivu"})]})},M=function(e){e.notes;return Object(v.jsx)("div",{children:Object(v.jsx)("h1",{children:"Omat sivut"})})},R={register:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var _=function(e){var t=Object(i.useState)(""),n=Object(s.a)(t,2),r=n[0],o=n[1],u=Object(i.useState)(""),l=Object(s.a)(u,2),j=l[0],d=l[1],b=Object(i.useState)(""),p=Object(s.a)(b,2),h=p[0],O=p[1],x=Object(i.useState)(""),f=Object(s.a)(x,2),m=f[0],g=f[1],k=Object(i.useState)(""),w=Object(s.a)(k,2),y=w[0],S=w[1],N=Object(i.useState)(""),C=Object(s.a)(N,2),T=C[0],I=C[1],B=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.register({username:r,firstname:y,lastname:T,email:j,password:h});case 2:e.sent,window.location.href="/login";case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{className:"px-4 py-3",onSubmit:B,children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"K\xe4ytt\xe4j\xe4nimi"}),Object(v.jsx)("input",{type:"text",className:"form-control",value:r,onChange:function(e){var t=e.target;return o(t.value)},placeholder:"K\xe4ytt\xe4j\xe4nimi"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Etunimi"}),Object(v.jsx)("input",{type:"text",className:"form-control",value:y,onChange:function(e){var t=e.target;return S(t.value)},placeholder:"Etunimi"}),Object(v.jsx)("label",{children:"Sukunimi"}),Object(v.jsx)("input",{type:"text",className:"form-control",value:T,onChange:function(e){var t=e.target;return I(t.value)},placeholder:"ukunimi"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"S\xe4hk\xf6posti"}),Object(v.jsx)("input",{type:"email",className:"form-control",value:j,onChange:function(e){var t=e.target;return d(t.value)},placeholder:"S\xe4hk\xf6posti"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Salasana"}),Object(v.jsx)("input",{type:"password",className:"form-control",value:h,onChange:function(e){var t=e.target;return O(t.value)},placeholder:"Salasana"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Vahvista Salasana"}),Object(v.jsx)("input",{type:"password",className:"form-control",value:m,onChange:function(e){var t=e.target;return g(t.value)},placeholder:"Vahvista salasana"})]}),Object(v.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Rekister\xf6idy"})]})})},z=function(){return l.a.get("/api/tasks").then((function(e){return e.data}))},D=n(29),V=n.n(D),G=n(145),W=n(144),$=n(31),q=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(i.useState)(null),u=Object(s.a)(o,2),l=u[0],j=u[1],d=Object(i.useState)([]),b=Object(s.a)(d,2),p=b[0],h=b[1];Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.localStorage.getItem("loggedBlogappUser"))){e.next=10;break}return e.next=4,JSON.parse(t);case 4:return n=e.sent,j(n.username),e.next=8,y();case 8:r=e.sent,h(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var O={padding:5},x=function(e){window.localStorage.removeItem("loggedBlogappUser"),j(null),h([])};return Object(v.jsxs)("div",{children:[Object(v.jsxs)($.a,{children:[Object(v.jsxs)(G.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(v.jsx)(G.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(v.jsx)(G.a.Collapse,{id:"responsive-navbar-nav",children:Object(v.jsxs)(W.a,{className:"mr-auto",children:[Object(v.jsx)(W.a.Link,{href:"#",as:"span",children:Object(v.jsx)($.b,{style:O,to:"/",children:"Home"})}),Object(v.jsx)(W.a.Link,{href:"#",as:"span",children:Object(v.jsx)($.b,{style:O,to:"/tasks",children:"Teht\xe4v\xe4t"})}),Object(v.jsx)(W.a.Link,{href:"#",as:"span",children:Object(v.jsx)($.b,{style:O,to:"/user",children:"Oma sivu"})}),Object(v.jsx)(W.a.Link,{href:"/user",as:"span",children:l?Object(v.jsxs)("em",{children:[l," logged in ",Object(v.jsx)("button",{onClick:x,children:"Logout"})]}):Object(v.jsx)($.b,{to:"/login",children:"Login"})})]})})]}),Object(v.jsxs)(E.d,{children:[Object(v.jsx)(E.b,{path:"/tasks",children:Object(v.jsx)(H,{tasks:n,user:l,notes:p})}),Object(v.jsx)(E.b,{path:"/user",children:l?Object(v.jsx)(M,{notes:p}):Object(v.jsx)(E.a,{to:"/login"})}),Object(v.jsx)(E.b,{path:"/login",children:Object(v.jsx)(P,{onLogin:function(e){j(e)}})}),Object(v.jsx)(E.b,{path:"/register",children:Object(v.jsx)(_,{})}),Object(v.jsx)(E.b,{path:"/",children:Object(v.jsx)(K,{})})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{}),Object(v.jsx)("br",{}),Object(v.jsx)("em",{children:"Sivujen toteutus: Mitavain"})]})]})};V.a.render(Object(v.jsx)($.a,{children:Object(v.jsx)(q,{})}),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.212f548c.chunk.js.map