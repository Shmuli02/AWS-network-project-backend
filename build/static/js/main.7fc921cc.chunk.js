(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{93:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),c=n(11),s=n(10),i=n(0),o=n(95),l=n(21),u=n.n(l),j="/api/notes",d=null,b={getAll:function(){return u.a.get(j).then((function(e){return e.data}))},create:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,u.a.post(j,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){d="bearer ".concat(e)},update:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:d}},e.next=3,u.a.put("".concat(j,"/").concat(t),n,r);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteNote:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,u.a.delete("".concat(j,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=n(18),p=n(29),O=n(30),x=n(33),f=n(1);function v(e){e.taskId;var t=e.note,n=Object(i.useState)(!1),r=Object(s.a)(n,2),o=r[0],l=r[1],u=t[0],j=Object(i.useState)(u.url),d=Object(s.a)(j,2),v=d[0],m=d[1],g=function(){return l(!1)},k=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.localStorage.getItem("loggedBlogappUser"),e.next=3,JSON.parse(n);case 3:return r=e.sent,b.setToken(r.token),e.next=7,b.update(u.id,{url:v});case 7:e.sent,g(),m("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.localStorage.getItem("loggedBlogappUser"),e.next=3,JSON.parse(t);case 3:n=e.sent,console.log(u),b.setToken(n.token),b.deleteNote(u.id),g();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"primary",onClick:function(){return l(!0)},children:"Muokkaa suoritusta"}),Object(f.jsxs)(h.a,{show:o,onHide:g,children:[Object(f.jsx)(h.a.Header,{closeButton:!0,children:Object(f.jsx)(h.a.Title,{children:"Modal heading"})}),Object(f.jsxs)(h.a.Body,{children:[Object(f.jsxs)(x.a,{children:["Woohoo, you're reading this text in a modal!",Object(f.jsxs)(O.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(f.jsx)(O.a.Label,{children:"Linkki"}),Object(f.jsx)(O.a.Control,{as:"textarea",rows:2,onChange:function(e){return m(e.target.value)},value:v})]})]}),Object(f.jsx)(x.a,{children:Object(f.jsx)(p.a,{variant:"danger",onClick:w,children:"Poista suoritus"})})]}),Object(f.jsxs)(h.a.Footer,{children:[Object(f.jsx)(p.a,{variant:"secondary",onClick:g,children:"Peruuta"}),Object(f.jsx)(p.a,{variant:"primary",onClick:k,children:"Tallenna"})]})]})]})}function m(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],o=n[1],l=Object(i.useState)(""),u=Object(s.a)(l,2),j=u[0],d=u[1],x=function(){return o(!1)},v=function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=window.localStorage.getItem("loggedBlogappUser"),t.next=3,JSON.parse(r);case 3:return c=t.sent,console.log(n),console.log(e.taskId),console.log(c.username),console.log(j),b.setToken(c.token),t.next=11,b.create({task:e.taskId,user:c.username,url:j});case 11:t.sent,x();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"primary",onClick:function(){return o(!0)},children:"Lis\xe4\xe4 suoritus"}),Object(f.jsxs)(h.a,{show:r,onHide:x,children:[Object(f.jsx)(h.a.Header,{closeButton:!0,children:Object(f.jsx)(h.a.Title,{children:"Modal heading"})}),Object(f.jsxs)(h.a.Body,{children:["Suoritus",Object(f.jsxs)(O.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(f.jsx)(O.a.Label,{children:"Linkki"}),Object(f.jsx)(O.a.Control,{as:"textarea",rows:2,onChange:function(e){return d(e.target.value)},value:j})]})]}),Object(f.jsxs)(h.a.Footer,{children:[Object(f.jsx)(p.a,{variant:"secondary",onClick:x,children:"Peruuta"}),Object(f.jsx)(p.a,{variant:"primary",onClick:v,children:"Tallenna"})]})]})]})}var g=n(40),k=function(e){var t=e.tasks,n=e.notes,r=e.user,a=n.map((function(e){return e.task}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Teht\xe4v\xe4t"}),Object(f.jsxs)(o.a,{striped:!0,bordered:!0,hover:!0,children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[r?Object(f.jsx)("th",{children:"Suoritukset"}):"",Object(f.jsx)("th",{children:"Teht\xe4v\xe4"}),Object(f.jsx)("th",{children:"Haastavuus"}),r?Object(f.jsx)("th",{children:"Muokkaus"}):""]})}),Object(f.jsx)("tbody",{children:t.map((function(e){return Object(f.jsxs)("tr",{children:[r?Object(f.jsx)("td",{children:a.includes(e._id)?Object(f.jsx)(g.a,{pill:!0,variant:"success",children:"Suoritettu"}):Object(f.jsx)(g.a,{pill:!0,variant:"light",children:"Ei suoritettu"})}):"",Object(f.jsx)("td",{children:e.title}),Object(f.jsx)("td",{children:e.difficulty}),r?Object(f.jsx)("td",{children:a.includes(e._id)?Object(f.jsx)(v,{taskId:e._id,note:n.filter((function(t){return t.task==e._id}))}):Object(f.jsx)(m,{taskId:e._id})}):""]},e._id)}))})]})]})},w=n(8),y={login:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(e){var t=Object(w.g)(),n=Object(i.useState)(""),r=Object(s.a)(n,2),o=r[0],l=r[1],u=Object(i.useState)(""),j=Object(s.a)(u,2),d=j[0],b=j[1],h=Object(i.useState)(null),p=Object(s.a)(h,2),O=(p[0],p[1]),x=Object(i.useState)(null),v=Object(s.a)(x,2),m=(v[0],v[1]),g=function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,y.login({username:o,password:d});case 4:c=n.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(c)),O(c),l(""),b(""),e.onLogin(o),t.push("/"),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),m("wrong credentials"),setTimeout((function(){m(null)}),5e3);case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}();return Object(f.jsxs)("div",{children:[Object(f.jsxs)("form",{className:"px-4 py-3",onSubmit:g,children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Username"}),Object(f.jsx)("input",{type:"text",className:"form-control",value:o,onChange:function(e){var t=e.target;return l(t.value)},placeholder:"Username"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Password"}),Object(f.jsx)("input",{type:"password",className:"form-control",value:d,onChange:function(e){var t=e.target;return b(t.value)},placeholder:"Password"})]}),Object(f.jsxs)("div",{className:"form-check",children:[Object(f.jsx)("input",{type:"checkbox",className:"form-check-input",id:"dropdownCheck"}),Object(f.jsx)("label",{className:"form-check-label",children:"Remember me"})]}),Object(f.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]}),Object(f.jsx)("div",{className:"dropdown-divider"}),Object(f.jsx)("a",{className:"dropdown-item",href:"/register",children:"New around here? Sign up"}),Object(f.jsx)("a",{className:"dropdown-item",href:"#",children:"Forgot password?"})]})},N=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Aktiivinen Keppari"}),Object(f.jsx)("p",{children:"Aktiivinen Keppari kilpailun etusivu"})]})},C=function(e){var t=e.notes;return console.log(t),Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Omat sivut"})})},T=function(e){},I=function(e){var t=Object(i.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(""),o=Object(s.a)(c,2),l=o[0],u=o[1],j=Object(i.useState)(""),d=Object(s.a)(j,2),b=d[0],h=d[1],p=Object(i.useState)(""),O=Object(s.a)(p,2),x=O[0],v=O[1];return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{className:"px-4 py-3",onSubmit:T,children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"K\xe4ytt\xe4j\xe4nimi"}),Object(f.jsx)("input",{type:"text",className:"form-control",value:r,onChange:function(e){var t=e.target;return a(t.value)},placeholder:"K\xe4ytt\xe4j\xe4nimi"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"S\xe4hk\xf6posti"}),Object(f.jsx)("input",{type:"email",className:"form-control",value:l,onChange:function(e){var t=e.target;return u(t.value)},placeholder:"S\xe4hk\xf6posti"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Salasana"}),Object(f.jsx)("input",{type:"password",className:"form-control",value:b,onChange:function(e){var t=e.target;return h(t.value)},placeholder:"Salasana"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Vahvista Salasana"}),Object(f.jsx)("input",{type:"password",className:"form-control",value:x,onChange:function(e){var t=e.target;return v(t.value)},placeholder:"Vahvista salasana"})]}),Object(f.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Rekister\xf6idy"})]})})},L=function(){return u.a.get("/api/tasks").then((function(e){return e.data}))},B=n(26),U=n.n(B),A=n(97),F=n(96),J=n(28),H=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(i.useState)(null),l=Object(s.a)(o,2),u=l[0],j=l[1],d=Object(i.useState)([]),h=Object(s.a)(d,2),p=h[0],O=h[1];Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){var t,n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.localStorage.getItem("loggedBlogappUser"))){e.next=13;break}return e.next=4,JSON.parse(t);case 4:return n=e.sent,j(n.username),e.next=8,b.getAll();case 8:return r=e.sent,e.next=11,r.filter((function(e){return e.user.username===n.username}));case 11:c=e.sent,O(c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(u,n,p);var x={padding:5},v=function(e){window.localStorage.removeItem("loggedBlogappUser"),j(null),O([])};return Object(f.jsxs)("div",{children:[Object(f.jsxs)(J.a,{children:[Object(f.jsxs)(A.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(f.jsx)(A.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(f.jsx)(A.a.Collapse,{id:"responsive-navbar-nav",children:Object(f.jsxs)(F.a,{className:"mr-auto",children:[Object(f.jsx)(F.a.Link,{href:"#",as:"span",children:Object(f.jsx)(J.b,{style:x,to:"/",children:"Home"})}),Object(f.jsx)(F.a.Link,{href:"#",as:"span",children:Object(f.jsx)(J.b,{style:x,to:"/task",children:"Teht\xe4v\xe4t"})}),Object(f.jsx)(F.a.Link,{href:"#",as:"span",children:Object(f.jsx)(J.b,{style:x,to:"/user",children:"Oma sivu"})}),Object(f.jsx)(F.a.Link,{href:"/user",as:"span",children:u?Object(f.jsxs)("em",{children:[u," logged in ",Object(f.jsx)("button",{onClick:v,children:"Logout"})]}):Object(f.jsx)(J.b,{to:"/login",children:"Login"})})]})})]}),Object(f.jsxs)(w.d,{children:[Object(f.jsx)(w.b,{path:"/task",children:Object(f.jsx)(k,{tasks:n,notes:p,user:u})}),Object(f.jsx)(w.b,{path:"/user",children:u?Object(f.jsx)(C,{notes:p}):Object(f.jsx)(w.a,{to:"/login"})}),Object(f.jsx)(w.b,{path:"/login",children:Object(f.jsx)(S,{onLogin:function(e){j(e)}})}),Object(f.jsx)(w.b,{path:"/register",children:Object(f.jsx)(I,{})}),Object(f.jsx)(w.b,{path:"/",children:Object(f.jsx)(N,{})})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)("em",{children:"Sivujen toteutus: Mitavain"})]})]})};U.a.render(Object(f.jsx)(J.a,{children:Object(f.jsx)(H,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.7fc921cc.chunk.js.map