(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{75:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),s=n(12),c=n(9),i=n(0),l=n(77),o=n(18),u=n.n(o),j="/api/notes",b=null,d={getAll:function(){return u.a.get(j).then((function(e){return e.data}))},create:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:b}},e.next=3,u.a.post(j,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){b="bearer ".concat(e)}},h=n(1),p=function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.localStorage.getItem("loggedBlogappUser"),e.next=3,JSON.parse(n);case 3:return r=e.sent,console.log(t),console.log(r.username),d.setToken(r.token),e.next=9,d.create({task:t.target.value,user:r.username});case 9:e.sent;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=e.tasks,n=e.notes,r=e.user,a=n.map((function(e){return e.task}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Teht\xe4v\xe4t"}),Object(h.jsxs)(l.a,{striped:!0,bordered:!0,hover:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[r?Object(h.jsx)("th",{children:"Suoritukset"}):"",Object(h.jsx)("th",{children:"Teht\xe4v\xe4"}),Object(h.jsx)("th",{children:"Haastavuus"})]})}),Object(h.jsx)("tbody",{children:t.map((function(e){return Object(h.jsxs)("tr",{children:[r?Object(h.jsx)("div",{children:Object(h.jsx)("td",{children:a.includes(e._id)?Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{class:"badge badge-pill badge-success",children:"Suoritettu"}),Object(h.jsx)("button",{value:e._id,onClick:O,class:"badge badge-danger",children:"poista suoritus"})]}):Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{class:"badge badge-pill badge-secondary",children:"Ei suoritettu"}),Object(h.jsx)("button",{value:e._id,onClick:p,class:"badge badge-primary",children:"Merkitse suoritus"})]})})}):"",Object(h.jsx)("td",{children:e.title}),Object(h.jsx)("td",{children:e.difficulty})]},e._id)}))})]})]})},f=n(4),v={login:function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(e){var t=Object(f.g)(),n=Object(i.useState)(""),r=Object(c.a)(n,2),l=r[0],o=r[1],u=Object(i.useState)(""),j=Object(c.a)(u,2),b=j[0],d=j[1],p=Object(i.useState)(null),O=Object(c.a)(p,2),x=(O[0],O[1]),g=Object(i.useState)(null),m=Object(c.a)(g,2),k=(m[0],m[1]),w=function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,v.login({username:l,password:b});case 4:s=n.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(s)),x(s),o(""),d(""),e.onLogin(l),t.push("/"),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),k("wrong credentials"),setTimeout((function(){k(null)}),5e3);case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("form",{className:"px-4 py-3",onSubmit:w,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username"}),Object(h.jsx)("input",{type:"text",className:"form-control",value:l,onChange:function(e){var t=e.target;return o(t.value)},placeholder:"Username"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",className:"form-control",value:b,onChange:function(e){var t=e.target;return d(t.value)},placeholder:"Password"})]}),Object(h.jsxs)("div",{className:"form-check",children:[Object(h.jsx)("input",{type:"checkbox",className:"form-check-input",id:"dropdownCheck"}),Object(h.jsx)("label",{className:"form-check-label",children:"Remember me"})]}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]}),Object(h.jsx)("div",{className:"dropdown-divider"}),Object(h.jsx)("a",{className:"dropdown-item",href:"/register",children:"New around here? Sign up"}),Object(h.jsx)("a",{className:"dropdown-item",href:"#",children:"Forgot password?"})]})},m=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Aktiivinen Keppari"}),Object(h.jsx)("p",{children:"Aktiivinen Keppari kilpailun etusivu"})]})},k=function(e){var t=e.notes;return console.log(t),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"TKTL notes app"}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:"Matti Luukkainen"}),Object(h.jsx)("li",{children:"Juha Tauriainen"}),Object(h.jsx)("li",{children:"Arto Hellas"})]})]})},w=function(e){},y=function(e){var t=Object(i.useState)(""),n=Object(c.a)(t,2),r=n[0],a=n[1],s=Object(i.useState)(""),l=Object(c.a)(s,2),o=l[0],u=l[1],j=Object(i.useState)(""),b=Object(c.a)(j,2),d=b[0],p=b[1],O=Object(i.useState)(""),x=Object(c.a)(O,2),f=x[0],v=x[1];return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"px-4 py-3",onSubmit:w,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"K\xe4ytt\xe4j\xe4nimi"}),Object(h.jsx)("input",{type:"text",className:"form-control",value:r,onChange:function(e){var t=e.target;return a(t.value)},placeholder:"K\xe4ytt\xe4j\xe4nimi"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"S\xe4hk\xf6posti"}),Object(h.jsx)("input",{type:"email",className:"form-control",value:o,onChange:function(e){var t=e.target;return u(t.value)},placeholder:"S\xe4hk\xf6posti"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Salasana"}),Object(h.jsx)("input",{type:"password",className:"form-control",value:d,onChange:function(e){var t=e.target;return p(t.value)},placeholder:"Salasana"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Vahvista Salasana"}),Object(h.jsx)("input",{type:"password",className:"form-control",value:f,onChange:function(e){var t=e.target;return v(t.value)},placeholder:"Vahvista salasana"})]}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Rekister\xf6idy"})]})})},S=function(){return u.a.get("/api/tasks").then((function(e){return e.data}))},N=n(20),C=n.n(N),L=n(78),T=n(79),A=n(16),J=function(){var e=Object(i.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],l=Object(i.useState)(null),o=Object(c.a)(l,2),u=o[0],j=o[1],b=Object(i.useState)([]),p=Object(c.a)(b,2),O=p[0],v=p[1];Object(i.useEffect)((function(){function e(){return(e=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(i.useEffect)((function(){function e(){return(e=Object(s.a)(a.a.mark((function e(){var t,n,r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.localStorage.getItem("loggedBlogappUser"))){e.next=13;break}return e.next=4,JSON.parse(t);case 4:return n=e.sent,j(n.username),e.next=8,d.getAll();case 8:return r=e.sent,e.next=11,r.filter((function(e){return e.user.username===n.username}));case 11:s=e.sent,v(s);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(u,n,O);var w={padding:5},N=function(e){window.localStorage.removeItem("loggedBlogappUser"),j(null),v([])};return Object(h.jsxs)("div",{children:[Object(h.jsxs)(A.a,{children:[Object(h.jsxs)(L.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(h.jsx)(L.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(h.jsx)(L.a.Collapse,{id:"responsive-navbar-nav",children:Object(h.jsxs)(T.a,{className:"mr-auto",children:[Object(h.jsx)(T.a.Link,{href:"#",as:"span",children:Object(h.jsx)(A.b,{style:w,to:"/",children:"Home"})}),Object(h.jsx)(T.a.Link,{href:"#",as:"span",children:Object(h.jsx)(A.b,{style:w,to:"/task",children:"Teht\xe4v\xe4t"})}),Object(h.jsx)(T.a.Link,{href:"#",as:"span",children:Object(h.jsx)(A.b,{style:w,to:"/user",children:"Oma sivu"})}),Object(h.jsx)(T.a.Link,{href:"/user",as:"span",children:u?Object(h.jsxs)("em",{children:[u," logged in ",Object(h.jsx)("button",{onClick:N,children:"Logout"})]}):Object(h.jsx)(A.b,{to:"/login",children:"Login"})})]})})]}),Object(h.jsxs)(f.d,{children:[Object(h.jsx)(f.b,{path:"/task",children:Object(h.jsx)(x,{tasks:n,notes:O,user:u})}),Object(h.jsx)(f.b,{path:"/user",children:u?Object(h.jsx)(k,{notes:O}):Object(h.jsx)(f.a,{to:"/login"})}),Object(h.jsx)(f.b,{path:"/login",children:Object(h.jsx)(g,{onLogin:function(e){j(e)}})}),Object(h.jsx)(f.b,{path:"/register",children:Object(h.jsx)(y,{})}),Object(h.jsx)(f.b,{path:"/",children:Object(h.jsx)(m,{})})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("br",{}),Object(h.jsx)("em",{children:"Sivujen toteutus: Mitavain"})]})]})};C.a.render(Object(h.jsx)(A.a,{children:Object(h.jsx)(J,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.c46683d0.chunk.js.map